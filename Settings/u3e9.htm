<!DOCTYPE html>

<html>
<head>
<title>Untitled</title>
<script language="JavaScript" type="text/javascript">

var contenido="Cliente;Localidad;Cuota\nLaura;Santander;50\n�lvaro;Castro;50\nIgor;Castro;60\nIvan;Santander;40\nM�nica;Zamora;30\nJavi;Bilbao;30\nDavid;Bilbao;50\nJos� Luis;Bilbao;60";
var valido=false;
while (!valido){
var peticion=prompt("Elige qu� opci�n quieres (1,2,3)?");
switch (peticion.trim()){
case "1":
	valido=true;
	var contenido2=contenido.replace(/;/g,"</td><td>");
	var mostrar="<h3 align='center'>Elementos ordenados en forma de tabla</h3>";			
	mostrar+="<table border='1'><tr><td>";
	mostrar+=contenido2.replace(/\n/g,"</td></tr><tr><td>");
	mostrar+="</td></tr></table>";
	break;
case "2":
	valido=true;
	var pideprovincia=prompt("introduce la provincia");
	pideprovincia=pideprovincia.trim();
	var arraycontenido = new Array();
	arraycontenido=contenido.split("\n");
	var n=0;
	var muestra="";
	var mostrar="";
	var numfilas=0;
//Recorremos el array y buscamos el texto introducido
	for(var i=0;i<arraycontenido.length;i++){
	n=arraycontenido[i].search(pideprovincia);
//Si en cada elemento del array, encontramos el texto introducido
//creamos una cadena sin el texto introducido				
	if(n!=-1){
	muestra+=arraycontenido[i].substring(0,n-1)+";"+arraycontenido[i].substring(n+pideprovincia.length+1,arraycontenido[i].length)+"\n";
	numfilas++;	
	}
	}
//Para eliminar el �ltimo \n que nos generar�a una fila m�s
	muestra=muestra.substring(0,muestra.length-1);
//Reemplazamos todos los ;
	muestra=muestra.replace(/;/g,"</td><td>");
//Reemplazamos todos los \n y despu�s creamos la tabla
	mostrar+="<h3 align='center'>Elementos de la tabla de la localidad "+pideprovincia+"</h3>";			
	if(numfilas>0){		
		mostrar+="<table border='1'><tr><th>Cliente</th><th>Cuota</th></tr><tr><td>";
		mostrar+=muestra.replace(/\n/g,"</td></tr><tr><td>");
		mostrar+="</td></tr></table>";
	}else{
		mostrar+="<p align='center'><b>No se ha encontrado ning�n valor que cumpla la condici�n</b></p>";			
	}			
	break;
case "3":
	valido=true;
	var mostrar="";
	var muestra="";		
	do{			
	var pidevalor=prompt("Introduce el valor de cuota a superar");
	pidevalor=pidevalor.trim();
	}while(isNaN(pidevalor))
//pidevalor es una cadena num�rica. Voy a buscar la posici�n del �ltimo ; en cada elemento del array
//Una vez lo tenga, la cuota ser� la cadena entre dicha posici�n y el �ltimo car�cter de dicho elemento del array
	var arraycontenido = new Array();
	arraycontenido=contenido.split("\n");
	var n=0;
	var numfilas=0;			
	for(i=0;i<arraycontenido.length;i++){
		n=arraycontenido[i].lastIndexOf(";");			
		if(parseInt(pidevalor) < parseInt(arraycontenido[i].substring(n+1,arraycontenido[i].length))){
			muestra+=arraycontenido[i]+"\n";
			numfilas++;				
		}
	}			
//Para eliminar el �ltimo \n que nos generar�a una fila m�s
	muestra=muestra.substring(0,muestra.length-1);
//Reemplazamos todos los ;
	muestra=muestra.replace(/;/g,"</td><td>");
//Reemplazamos todos los \n y despu�s creamos la tabla
	mostrar+="<h3 align='center'>Elementos de la tabla con cuota superior a "+pidevalor+"</h3>";			
	if(numfilas>0){			
		mostrar+="<table border='1'><tr><th>Cliente</th><th>Localidad</th><th>Cuota</th></tr><tr><td>";
		mostrar+=muestra.replace(/\n/g,"</td></tr><tr><td>");
		mostrar+="</td></tr></table>";
	}else{
		mostrar+="<p align='center'><b>No se ha encontrado ning�n valor que cumpla la condici�n</b></p>";			
	}			
	break;
default:
	valido=false;
}
}

</script>

</head>
<body>
<script language="JavaScript" type="text/javascript">

document.write(mostrar);

</script>
</body>
</html>
